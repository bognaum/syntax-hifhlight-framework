<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<style>
		.container {
			margin: 10px 100px;
		}
	</style>
	<link rel="stylesheet" href="./../themes.css">
	<title>Test Json-error-hl</title>
</head>
<body>
	<div class="container">
		<h1>Тесты</h1>
		
		<pre id="pre_1" class="syntax-hl-fk calm-clarified-json-theme"></pre>
		<script type="text/javascript" src="get-code-1.js"></script>
		<pre id="pre_2" class="syntax-hl-fk calm-clarified-json-theme"></pre>
		<script type="text/javascript" src="get-code-2.js"></script>
		<pre id="pre_3" class="syntax-hl-fk calm-clarified-json-theme" data-line-num="21">
			[
				{
					"td": "Доменное имя",
					"ch": [
						{
							"bd": "домен 3-го уровня",
							"td": "Хост",
							"ch": "mail"
						},{
							"td": "",
							"ch": "."
						},{
							"bd": "домен 2-го уровня",
							"td": "Доменная \n зона",
							"ch": "google"
						},{
							"td": "",
							"ch": "."
						},{
							"bd": "домен 1-го уровня",
							"td": "Доменная \n зона",
							"ch": "com"
						},{
							"bd": "Корневой домен. \n Можно не писать.",
							"ch": "."
						}
					]
				}
			]
		</pre>
		
		<pre id="pre_4" class="syntax-hl-fk calm-clarified-json-theme" data-line-num="53">
			[
				{
					"name": "phpQuery",
					"opened": true,
					"capt": "Бизнес дистрибутив.",
					"ch": [
						{
							"name": "phpQuery",
							"opened": true,
							"ch": [
								{
									"name": "compat",
									"opened": false,
									"ch": true
								},
								{
									"name": "plugins",
									"opened": false,
									,
									"ch": true
								},
								{
									"name": "Zend",
									"opened": false},
									"khkjh" : "",
									"ch": true
								},
								{
									"name": "bootstrap.example.php"
								},
								{
									"name": "Callback.php"
								},
								{
									"name": "DOMDocumentWrapper.php"
								},
								{
									"name": "DOMEvent.php"
								},
								{
									"name": "phpQueryEvents.php"
								},
								{
									"name": "phpQueryObject.php"
								},
								{
									"sdbhjb"    :
									"jnjncj"
								},
							]
						},
						{
							"name": "phpQuery.php",
							"capt": "Точка подключения."
						}
					]
				}
			]
		</pre>
		
		<pre id="pre_5" class="syntax-hl-fk calm-clarified-json-theme" data-line-num="114">
			[
				{
					"name": "phpQuery",
					"opened": true,
					"capt": "Бизнес дистрибутив.",
					"ch": [
						{
							"name": "phpQuery",
							"opened": true,
							"ch": [
								{
									"name": "compat",
									"opened": false,
									"ch": true
								},
								{
									"name": "plugins",
									"opened": false,
									"ch": true
								},
								{
									"name": "Zend",
									"opened": false,
									"khkjh" : ""
								},
								{
									"name": "bootstrap.example.php"
								},
								{
									"name": "Callback.php"
								},
								{
									"name": "DOMDocu\mentWrapper.php"
								},
								{
									"name": "DOMEvent.php"
								},
								{
									"name": "phpQueryEvents.php"
								},
								{
									"name": "phpQueryObject.php"
								},
								{
									"sdbhjb"    :
									"jnjncj"
								},
							]
						},
						{
							"name": "phpQuery.php",
							"capt": "Точка подключения."
						}
					]
				}
			]
		</pre>

		<pre id="pre_6" class="syntax-hl-fk calm-clarified-json-theme" data-line-num="173">
			[
				{
					"td": "Доменное имя",
					"ch": [
						{
							"bd": "домен 3-го уровня",
							"td": "Хост",
							"ch": "mail"
						},
						{
							"td": "",
							"ch": "."
						},
					]
				}
			]
		</pre>
		<script type="module">
			// import jsonHl from "./bundle-describe-syntax.js";
			
			// import "./bundle-style.js";
			import jsonHl from "./describe-syntax.js";

			console.log(`jsonHl`, jsonHl);

			jsonHl.highlightTextContent(pre_1);
			jsonHl.scrollToFirstError  (pre_1);
			jsonHl.highlightTextContent(pre_2);
			jsonHl.scrollToFirstError  (pre_2);
			jsonHl.highlightTextContent(pre_3);
			jsonHl.scrollToFirstError  (pre_3);
			jsonHl.highlightTextContent(pre_4);
			jsonHl.scrollToFirstError  (pre_4);
			jsonHl.highlightTextContent(pre_5);
			jsonHl.scrollToFirstError  (pre_5);
			jsonHl.highlight(pre_6, pre_6.textContent);
			jsonHl.scrollToFirstError  (pre_6);

			document.querySelector("body .container").appendChild(
				eHTML(`<h2>Inserted</h2>`)
			);
			var el = document.querySelector("body .container").appendChild(
				jsonHl.getHighlighted(`
					[
						{
							"name": "phpQuery",
							"opened": true,
							"capt": "Бизнес дистрибутив.",
							"ch": [
								{
									"name": "phpQuery",
									"opened": true,
									"ch": [
										{
											"name": "compat",
											"opened": false,
											"ch": true
										},
										{
											"name": "plugins",
											"opened": false,
											"ch": true
										},
										{
											"name": "Zend",
											"opened": false,
											"khkjh" : ""
										},
										{
											"name": "bootstrap.example.php"
										},
										{
											"name": "Callback.php"
										},
										{
											"name": "DOMDocumentWrapper.php"
										},
										{
											"name": "DOMEvent.php"
										},
										{
											"name": "phpQueryEvents.php"
										},
										{
											"name": "phpQueryObject.php"
										},
										{
											"sdbhjb"    :
											"jnjncj"
										},
									]
								},
								{
									"name": "phpQuery.php",
									"capt": "Точка подключения."
								}
							]
						}
					]
				`)
			);
			jsonHl.scrollToFirstError(el);

			let a1
			document.querySelector(".container").append(
				document.createElement("br"),
				"inserted JSON vith error",
				a1 = jsonHl.getHighlighted(`
					[
						{
							"style": "color: #333; background-color: transparent;",
							"ch": "animation: "
						},
						{
							"td": "Все анимации",
							"ch": [
								{
									"td": "Анимация 1",
									"ch": [
										{
											"td": "name",
											"ch": "shadow"
										},
										{
											"ch": " "
										},
										{
											"td": "duration",
											"ch": "1s"
										},
										{
											"ch": " "
										},
										{
											"td": "timing-function",
											"bd": "  : ease\n  : linear\n  : ease-in\n  : ease-out\n  : ease-in-out\n  : cubic-bezier(x1, y1, x2, y2)\n  : step-start\n  : steps(1, end)\n  : steps( [количество шагов] , [start|end])\n  : initial\n  : inherit",
											"ch": "ease-in-out"
										},
										{
											"ch": " "
										},
										{
											"td": "delay",
											"ch": "0.5s"
										},
										{
											"ch": " "
										},
										{
											"td": "direction",
											"ch": "alternate"
										}
									]
								},
								{
									"ch": ", "
								},
								{
									"td": "Анимация 2",
									"ch": [
										{
											"ch": "move"
										},
										{
											"ch": " "
										},
										{
											"ch": "5s"
										},
										{
											"ch": " "
										},
										{
											"ch": "linear"
										},
										{
											"ch": " "
										},
										{
											"ch": "2s"
										}
									]
								}
							]
						},
						{
							"style": "color: #555; background-color: transparent;",
							"ch": ";"
						}
					]
				`)
			);
			jsonHl.scrollToFirstError(a1);

			function eHTML(code, shell=null) {
				const _shell = 
					! shell                  ? document.createElement("div") :
					typeof shell == "string" ? document.createElement(shell) :
					typeof shell == "object" ? shell :
						null;
				_shell.innerHTML = code;
				return _shell.children[0];
			}
		</script>
	</div>
</body>
</html> 